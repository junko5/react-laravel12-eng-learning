import{b as D,r as s,j as e}from"./app-DHacbUUS.js";import{u as R,a as v,b as F,Q as h,c as H,d as U,s as K}from"./use-quiz-sound-CR9aS4Lg.js";import{Q as M}from"./QuizHint-DUjUDXvm.js";/* empty css            */function B(){const{englishWords:W,config:o}=D().props,{playCorrectSound:E,playWrongSound:k}=R(),[b,L]=s.useState(!1),[T,q]=s.useState([]),[n,j]=s.useState(null),[Q,i]=s.useState(""),[r,u]=s.useState(""),[c,l]=s.useState(0),[d,x]=s.useState(0),[m,f]=s.useState(0),[y,S]=s.useState([]),g=()=>{L(!0),j(null),u(""),x(0),f(0),i(""),l(0),S([]);const t=K(W).slice(0,o.totalQuestions);q(t),w(t[0])};s.useEffect(()=>{g()},[]),s.useEffect(()=>{const t=a=>{a.key==="Enter"&&r==="不正解2回目"&&(a.preventDefault(),z())};return document.addEventListener("keydown",t),()=>document.removeEventListener("keydown",t)},[r]);const w=t=>{j(t),i(""),u(""),l(0)},I=t=>{if(t===""||r==="正解"||r==="不正解2回目")return;const a=t.trim().toLowerCase(),A=n?.word.toLowerCase();if(a===A)u("正解"),E(),c===0?x(d+o.scoreFirstTry):c===1&&x(d+o.scoreSecondTry),i(""),setTimeout(()=>{N()},1200);else{const C=c+1;l(C),k(),C>=2?(u("不正解2回目"),n&&!y.some(p=>p.word===n.word)&&S(p=>[...p,{word:n.word,meaning:n.meaning}])):u("不正解")}},z=()=>{i(""),N()},N=()=>{const t=m+1;if(t>=o.totalQuestions){f(t);return}const a=T[t];w(a),f(t),l(0),u("")};return b&&m>=o.totalQuestions?e.jsx(v,{maxWidth:"md",textAlign:"center",children:e.jsx(F,{score:d,config:o,onRestart:g,quizType:"input",wrongWords:y})}):e.jsx(v,{children:b?e.jsxs("div",{children:[e.jsx(H,{questionNumber:m+1,totalQuestions:o.totalQuestions,score:d}),e.jsxs("div",{className:"text-center mb-4",children:[e.jsx("h2",{className:"text-lg md:text-xl font-bold text-gray-800 mb-3",children:"日本語を英語にしてください"}),n&&e.jsxs("div",{children:[e.jsx(U,{content:n.meaning,theme:"pink"}),e.jsx("form",{onSubmit:t=>{t.preventDefault(),I(Q)},children:e.jsxs("div",{className:"grid gap-3",children:[e.jsx(M,{wrongCount:c,currentWord:n?.word||"",message:r,currentQuiz:n,quizType:"input"}),e.jsx("input",{type:"text",value:Q,autoFocus:!0,onChange:t=>i(t.target.value),className:"w-full p-4 border border-gray-300 rounded-xl text-lg text-gray-900 bg-white focus:outline-none focus:ring-2 focus:ring-blue-500"}),r==="不正解2回目"&&e.jsx("button",{onClick:z,className:h.buttons.secondary,children:"次の問題へ →"}),r!=="不正解2回目"&&e.jsx("button",{type:"submit",className:h.buttons.primary,children:"回答"})]})})]})]})]}):e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("div",{className:"w-24 h-24 bg-gradient-to-r from-blue-500 to-purple-600 rounded-full mx-auto mb-6 flex items-center justify-center",children:e.jsx("span",{className:"text-4xl",children:"📚"})}),e.jsx("h1",{className:"text-4xl font-bold text-gray-800 mb-4",children:"くまたと英単語"}),e.jsxs("p",{className:"text-gray-600 text-lg",children:[o.totalQuestions,"問の英単語クイズに挑戦しよう！"]})]}),e.jsx("button",{onClick:()=>g(),className:h.buttons.primary,children:"スタート"})]})})}export{B as default};
