import{j as s,r as t,b as M}from"./app-DHacbUUS.js";import{Q as c,u as O,a as v,b as P,c as T,d as F,s as f}from"./use-quiz-sound-CR9aS4Lg.js";/* empty css            */function H({message:a,currentQuiz:l,quizType:i}){return s.jsxs("div",{className:"mb-4 min-h-[40px] flex items-center justify-center",children:[a==="正解"&&s.jsx("div",{className:c.messages.correct,children:s.jsx("span",{className:"font-bold text-lg",children:"🎉 正解です！"})}),a==="不正解"&&s.jsx("div",{className:c.messages.incorrect,children:s.jsx("span",{className:"font-bold text-lg",children:i==="choice"?"❌もう一度チャレンジしてね。":i==="input_advanced"?"❌ 不正解です！制限時間内にもう一度！":"❌ もう一度チャレンジしてね。"})}),a==="不正解2回目"&&i==="input"&&s.jsx("div",{className:c.messages.incorrect,children:s.jsxs("span",{className:"font-bold text-lg",children:["❌ 正解は",l?.word,"でした。"]})}),a==="時間切れ"&&i==="input_advanced"&&s.jsx("div",{className:c.messages.timeout,children:s.jsxs("span",{className:"font-bold text-lg",children:["⏰ 時間切れ！正解は「",l?.word,"」でした。"]})})]})}function k(){const[a,l]=t.useState(!1),{englishWords:i,config:r}=M().props,{playCorrectSound:w,playWrongSound:y}=O(),[C,W]=t.useState([]),[o,j]=t.useState(null),[A,b]=t.useState([]),[E,d]=t.useState(""),[R,u]=t.useState(!1),[x,p]=t.useState(0),[m,h]=t.useState(0),[N,Q]=t.useState([]),g=()=>{l(!0),p(0),h(0),u(!1),d(""),j(null),b([]),Q([]);const e=f(i).slice(0,r.totalQuestions);W(e),S(e[0])};t.useEffect(()=>{g()},[]);const S=e=>{j(e);const n=i.filter(L=>L.id!==e.id),z=f(n).slice(0,2),I=[e.meaning,z[0].meaning,z[1].meaning];b(f(I))},_=e=>{o&&o.meaning===e?(d("正解"),w(),R||(p(x+r.scoreFirstTry),u(!0)),setTimeout(()=>{q()},1500)):(d("不正解"),y(),u(!0),o&&!N.some(n=>n.word===o.word)&&Q(n=>[...n,{word:o.word,meaning:o.meaning}]))},q=()=>{const e=m+1;if(e>=r.totalQuestions){h(e);return}const n=C[e];S(n),h(e),u(!1),d("")};return a&&m>=r.totalQuestions?s.jsx(v,{maxWidth:"md",textAlign:"center",children:s.jsx(P,{score:x,config:r,onRestart:g,quizType:"choice",wrongWords:N})}):s.jsx(v,{children:a?s.jsxs("div",{children:[s.jsx(T,{questionNumber:m+1,totalQuestions:r.totalQuestions,score:x}),s.jsx(H,{message:E,quizType:"choice"}),s.jsxs("div",{className:"text-center mb-4",children:[s.jsx("h2",{className:"text-lg md:text-xl font-bold text-gray-800 mb-3",children:"次の単語の意味は？"}),o&&s.jsxs("div",{children:[s.jsx(F,{content:o.word,theme:"blue"}),s.jsx("div",{className:"grid gap-3",children:A.map((e,n)=>s.jsx("button",{onClick:()=>_(e),className:c.buttons.choice,children:e},n))})]})]})]}):s.jsxs("div",{className:"text-center",children:[s.jsxs("div",{className:"mb-8",children:[s.jsx("div",{className:"w-24 h-24 bg-gradient-to-r from-blue-500 to-cyan-500 rounded-full mx-auto mb-6 flex items-center justify-center",children:s.jsx("span",{className:"text-4xl",children:"📚"})}),s.jsx("h1",{className:"text-4xl font-bold text-gray-800 mb-4",children:"くまたと英単語"}),s.jsxs("p",{className:"text-gray-600 text-lg",children:[r.totalQuestions,"問の英単語クイズに挑戦しよう！"]})]}),s.jsx("button",{onClick:()=>g(),className:c.buttons.primary,children:"スタート"})]})})}export{k as default};
