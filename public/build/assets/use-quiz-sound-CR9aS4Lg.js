import{c as w,g as ur,j as s,L as lr,r as p}from"./app-DHacbUUS.js";var S,ce;function cr(){if(ce)return S;ce=1;function e(r,t){var a=-1,n=r.length;for(t||(t=Array(n));++a<n;)t[a]=r[a];return t}return S=e,S}var R,de;function dr(){if(de)return R;de=1;var e=Math.floor,r=Math.random;function t(a,n){return a+e(r()*(n-a+1))}return R=t,R}var N,fe;function Xe(){if(fe)return N;fe=1;var e=dr();function r(t,a){var n=-1,o=t.length,i=o-1;for(a=a===void 0?o:a;++n<a;){var u=e(n,i),c=t[u];t[u]=t[n],t[n]=c}return t.length=a,t}return N=r,N}var I,be;function fr(){if(be)return I;be=1;var e=cr(),r=Xe();function t(a){return r(e(a))}return I=t,I}var O,ge;function br(){if(ge)return O;ge=1;function e(r,t){for(var a=-1,n=r==null?0:r.length,o=Array(n);++a<n;)o[a]=t(r[a],a,r);return o}return O=e,O}var k,he;function gr(){if(he)return k;he=1;var e=br();function r(t,a){return e(a,function(n){return t[n]})}return k=r,k}var L,me;function hr(){if(me)return L;me=1;function e(r,t){for(var a=-1,n=Array(r);++a<r;)n[a]=t(a);return n}return L=e,L}var F,xe;function He(){if(xe)return F;xe=1;var e=typeof w=="object"&&w&&w.Object===Object&&w;return F=e,F}var E,ye;function Je(){if(ye)return E;ye=1;var e=He(),r=typeof self=="object"&&self&&self.Object===Object&&self,t=e||r||Function("return this")();return E=t,E}var P,pe;function We(){if(pe)return P;pe=1;var e=Je(),r=e.Symbol;return P=r,P}var C,ve;function mr(){if(ve)return C;ve=1;var e=We(),r=Object.prototype,t=r.hasOwnProperty,a=r.toString,n=e?e.toStringTag:void 0;function o(i){var u=t.call(i,n),c=i[n];try{i[n]=void 0;var d=!0}catch{}var m=a.call(i);return d&&(u?i[n]=c:delete i[n]),m}return C=o,C}var G,je;function xr(){if(je)return G;je=1;var e=Object.prototype,r=e.toString;function t(a){return r.call(a)}return G=t,G}var K,_e;function ue(){if(_e)return K;_e=1;var e=We(),r=mr(),t=xr(),a="[object Null]",n="[object Undefined]",o=e?e.toStringTag:void 0;function i(u){return u==null?u===void 0?n:a:o&&o in Object(u)?r(u):t(u)}return K=i,K}var U,Te;function le(){if(Te)return U;Te=1;function e(r){return r!=null&&typeof r=="object"}return U=e,U}var B,we;function yr(){if(we)return B;we=1;var e=ue(),r=le(),t="[object Arguments]";function a(n){return r(n)&&e(n)==t}return B=a,B}var M,qe;function pr(){if(qe)return M;qe=1;var e=yr(),r=le(),t=Object.prototype,a=t.hasOwnProperty,n=t.propertyIsEnumerable,o=e((function(){return arguments})())?e:function(i){return r(i)&&a.call(i,"callee")&&!n.call(i,"callee")};return M=o,M}var Q,Ae;function Ye(){if(Ae)return Q;Ae=1;var e=Array.isArray;return Q=e,Q}var j={exports:{}},V,Se;function vr(){if(Se)return V;Se=1;function e(){return!1}return V=e,V}j.exports;var Re;function jr(){return Re||(Re=1,(function(e,r){var t=Je(),a=vr(),n=r&&!r.nodeType&&r,o=n&&!0&&e&&!e.nodeType&&e,i=o&&o.exports===n,u=i?t.Buffer:void 0,c=u?u.isBuffer:void 0,d=c||a;e.exports=d})(j,j.exports)),j.exports}var $,Ne;function _r(){if(Ne)return $;Ne=1;var e=9007199254740991,r=/^(?:0|[1-9]\d*)$/;function t(a,n){var o=typeof a;return n=n??e,!!n&&(o=="number"||o!="symbol"&&r.test(a))&&a>-1&&a%1==0&&a<n}return $=t,$}var D,Ie;function Ze(){if(Ie)return D;Ie=1;var e=9007199254740991;function r(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=e}return D=r,D}var X,Oe;function Tr(){if(Oe)return X;Oe=1;var e=ue(),r=Ze(),t=le(),a="[object Arguments]",n="[object Array]",o="[object Boolean]",i="[object Date]",u="[object Error]",c="[object Function]",d="[object Map]",m="[object Number]",x="[object Object]",y="[object RegExp]",f="[object Set]",b="[object String]",T="[object WeakMap]",v="[object ArrayBuffer]",q="[object DataView]",g="[object Float32Array]",ze="[object Float64Array]",er="[object Int8Array]",rr="[object Int16Array]",tr="[object Int32Array]",ar="[object Uint8Array]",nr="[object Uint8ClampedArray]",sr="[object Uint16Array]",or="[object Uint32Array]",l={};l[g]=l[ze]=l[er]=l[rr]=l[tr]=l[ar]=l[nr]=l[sr]=l[or]=!0,l[a]=l[n]=l[v]=l[o]=l[q]=l[i]=l[u]=l[c]=l[d]=l[m]=l[x]=l[y]=l[f]=l[b]=l[T]=!1;function ir(A){return t(A)&&r(A.length)&&!!l[e(A)]}return X=ir,X}var H,ke;function wr(){if(ke)return H;ke=1;function e(r){return function(t){return r(t)}}return H=e,H}var _={exports:{}};_.exports;var Le;function qr(){return Le||(Le=1,(function(e,r){var t=He(),a=r&&!r.nodeType&&r,n=a&&!0&&e&&!e.nodeType&&e,o=n&&n.exports===a,i=o&&t.process,u=(function(){try{var c=n&&n.require&&n.require("util").types;return c||i&&i.binding&&i.binding("util")}catch{}})();e.exports=u})(_,_.exports)),_.exports}var J,Fe;function Ar(){if(Fe)return J;Fe=1;var e=Tr(),r=wr(),t=qr(),a=t&&t.isTypedArray,n=a?r(a):e;return J=n,J}var W,Ee;function Sr(){if(Ee)return W;Ee=1;var e=hr(),r=pr(),t=Ye(),a=jr(),n=_r(),o=Ar(),i=Object.prototype,u=i.hasOwnProperty;function c(d,m){var x=t(d),y=!x&&r(d),f=!x&&!y&&a(d),b=!x&&!y&&!f&&o(d),T=x||y||f||b,v=T?e(d.length,String):[],q=v.length;for(var g in d)(m||u.call(d,g))&&!(T&&(g=="length"||f&&(g=="offset"||g=="parent")||b&&(g=="buffer"||g=="byteLength"||g=="byteOffset")||n(g,q)))&&v.push(g);return v}return W=c,W}var Y,Pe;function Rr(){if(Pe)return Y;Pe=1;var e=Object.prototype;function r(t){var a=t&&t.constructor,n=typeof a=="function"&&a.prototype||e;return t===n}return Y=r,Y}var Z,Ce;function Nr(){if(Ce)return Z;Ce=1;function e(r,t){return function(a){return r(t(a))}}return Z=e,Z}var z,Ge;function Ir(){if(Ge)return z;Ge=1;var e=Nr(),r=e(Object.keys,Object);return z=r,z}var ee,Ke;function Or(){if(Ke)return ee;Ke=1;var e=Rr(),r=Ir(),t=Object.prototype,a=t.hasOwnProperty;function n(o){if(!e(o))return r(o);var i=[];for(var u in Object(o))a.call(o,u)&&u!="constructor"&&i.push(u);return i}return ee=n,ee}var re,Ue;function kr(){if(Ue)return re;Ue=1;function e(r){var t=typeof r;return r!=null&&(t=="object"||t=="function")}return re=e,re}var te,Be;function Lr(){if(Be)return te;Be=1;var e=ue(),r=kr(),t="[object AsyncFunction]",a="[object Function]",n="[object GeneratorFunction]",o="[object Proxy]";function i(u){if(!r(u))return!1;var c=e(u);return c==a||c==n||c==t||c==o}return te=i,te}var ae,Me;function Fr(){if(Me)return ae;Me=1;var e=Lr(),r=Ze();function t(a){return a!=null&&r(a.length)&&!e(a)}return ae=t,ae}var ne,Qe;function Er(){if(Qe)return ne;Qe=1;var e=Sr(),r=Or(),t=Fr();function a(n){return t(n)?e(n):r(n)}return ne=a,ne}var se,Ve;function Pr(){if(Ve)return se;Ve=1;var e=gr(),r=Er();function t(a){return a==null?[]:e(a,r(a))}return se=t,se}var oe,$e;function Cr(){if($e)return oe;$e=1;var e=Xe(),r=Pr();function t(a){return e(r(a))}return oe=t,oe}var ie,De;function Gr(){if(De)return ie;De=1;var e=fr(),r=Cr(),t=Ye();function a(n){var o=t(n)?e:r;return o(n)}return ie=a,ie}var Kr=Gr();const Mr=ur(Kr),h={buttons:{primary:"bg-gradient-to-r from-green-500 to-blue-500 text-white font-bold py-4 px-8 rounded-xl hover:from-green-600 hover:to-blue-600 transform hover:scale-105 transition-all duration-200 shadow-lg text-xl",secondary:"bg-gradient-to-r from-blue-500 to-purple-500 text-white font-bold py-4 px-8 rounded-xl hover:from-blue-600 hover:to-purple-600 transform hover:scale-105 transition-all duration-200 shadow-lg text-xl",retry:"w-full bg-gradient-to-r from-purple-600 to-pink-600 text-white font-bold py-4 px-6 rounded-xl hover:from-purple-700 hover:to-pink-700 transform hover:scale-105 transition-all duration-200 shadow-lg",choice:"cursor-pointer bg-gray-50 hover:bg-pink-300 hover:text-white border-2 border-gray-200 hover:border-transparent text-gray-800 hover:text-white font-semibold py-3 px-6 rounded-xl transition-all duration-200 transform hover:scale-105 shadow-md hover:shadow-lg text-lg"},cards:{blue:"bg-gradient-to-r from-blue-500 to-cyan-500 text-white text-2xl md:text-4xl font-bold py-3 md:py-4 px-4 md:px-6 rounded-xl mb-4 shadow-lg",pink:"bg-gradient-to-r from-pink-400 to-rose-400 text-white text-2xl md:text-4xl font-bold py-3 md:py-4 px-4 md:px-6 rounded-xl mb-4 shadow-lg",red:"bg-gradient-to-r from-red-400 to-red-400 text-white text-2xl md:text-4xl font-bold py-3 md:py-4 px-4 md:px-6 rounded-xl mb-4 shadow-lg"},badges:{question:"bg-blue-100 px-4 py-2 rounded-full",questionText:"text-blue-800 font-semibold",score:"bg-purple-100 px-4 py-2 rounded-full",scoreText:"text-purple-800 font-semibold"},messages:{correct:"bg-red-100 border-2 border-red-300 text-red-800 px-4 py-2 rounded-xl shadow-lg",incorrect:"bg-gray-100 border-2 border-gray-300 text-gray-800 px-4 py-2 rounded-xl shadow-lg animate-pulse",timeout:"bg-yellow-100 border-2 border-yellow-300 text-yellow-800 px-4 py-2 rounded-xl shadow-lg"},hints:{container:"flex flex-col items-center justify-center mb-4 space-y-3",box:"bg-gradient-to-r from-blue-100 to-cyan-100 border-2 border-blue-400 px-4 py-3 rounded-xl shadow-md w-full max-w-md",text:"text-blue-800 font-bold text-base md:text-lg",icon:"text-xl mr-2",messageBox:"px-4 py-2 rounded-xl shadow-md w-full max-w-md text-center",messageText:"font-bold text-base md:text-lg"},layout:{container:"min-h-screen bg-gradient-to-br from-sky-300 via-cyan-200 to-blue-300 flex items-center justify-center p-4",backButton:"absolute top-4 left-4 bg-white hover:bg-gray-50 text-gray-700 font-semibold py-2 px-4 rounded-lg shadow-md hover:shadow-lg transition-all duration-200 border border-gray-200",mainCard:"bg-white rounded-3xl shadow-2xl p-8 max-w-2xl w-full",header:"flex justify-between items-center mb-8 mt-12 md:mt-0"}};function Qr({children:e,maxWidth:r="xl",textAlign:t="left"}){const a={sm:"max-w-md",md:"max-w-lg",lg:"max-w-xl",xl:"max-w-2xl"}[r],n={left:"",center:"text-center",right:"text-right"}[t];return s.jsxs("div",{className:h.layout.container,children:[s.jsx(lr,{href:"/",className:h.layout.backButton,children:"← トップへ戻る"}),s.jsx("div",{className:`${h.layout.mainCard} ${a} ${n}`,children:e})]})}function Vr({questionNumber:e,totalQuestions:r,score:t}){return s.jsxs("div",{className:h.layout.header,children:[s.jsx("div",{className:h.badges.question,children:s.jsxs("span",{className:h.badges.questionText,children:["問題 ",e,"/",r]})}),s.jsx("div",{className:h.badges.score,children:s.jsxs("span",{className:h.badges.scoreText,children:["スコア: ",t]})})]})}function $r({content:e,theme:r}){return s.jsx("div",{className:h.cards[r],children:e})}const Ur=()=>{const e=p.useCallback(async(t,a)=>{try{(await fetch("/api/record-game",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.getAttribute("content")||""},body:JSON.stringify({gameType:t,score:a})})).ok||console.error("Failed to record game result")}catch(n){console.error("Error recording game result:",n)}},[]),r=p.useCallback(async t=>{try{const a=t?`/api/session-stats?gameType=${t}`:"/api/session-stats",n=await fetch(a);return n.ok?await n.json():(console.error("Failed to fetch session stats"),null)}catch(a){return console.error("Error fetching session stats:",a),null}},[]);return{recordGameResult:e,getSessionStats:r}};function Dr({score:e,config:r,onRestart:t,quizType:a,wrongWords:n=[]}){const{recordGameResult:o,getSessionStats:i}=Ur(),[u,c]=p.useState(null),d=r.totalQuestions*r.scoreFirstTry;p.useEffect(()=>{(async()=>{await o(a,e);const b=await i(a);b&&c(b)})()},[o,i,a,e]);const m=a==="choice"?null:`*一度で正解だと${r.scoreFirstTry}点、2回目で正解だと${r.scoreSecondTry}点が加点されます。`,y=(f=>f<=2?{comment:"まだまだこれから！",character:"/img/kumata.png"}:f<=6?{comment:"がんばったね！",character:"/img/kumata.png"}:{comment:"すごい！",character:"/img/kumata.png"})(e);return s.jsxs("div",{className:"mb-6",children:[s.jsx("div",{className:"w-24 h-24 mx-auto mb-4 flex items-center justify-center",children:s.jsx("img",{src:y.character,alt:"くまた",className:"w-full h-full object-contain"})}),s.jsx("h1",{className:"text-3xl font-bold text-gray-800 mb-2",children:"クイズ終了！"}),s.jsxs("div",{className:"bg-yellow-100 border-2 border-yellow-300 rounded-lg p-3 mb-4 relative",children:[s.jsx("div",{className:"text-lg font-bold text-gray-800",children:y.comment}),s.jsx("div",{className:"absolute -top-2 left-1/2 transform -translate-x-1/2 w-0 h-0 border-l-4 border-r-4 border-b-4 border-transparent border-b-yellow-300"})]}),s.jsxs("div",{className:"text-6xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-purple-600 to-pink-600 mb-2",children:[e,"/",d]}),s.jsx("p",{className:"text-gray-600",children:"あなたのスコアです"}),m&&s.jsx("p",{className:"text-gray-600 text-sm",children:m}),n.length>0&&s.jsxs("div",{className:"mt-6 p-4 bg-red-50 border border-red-200 rounded-lg",children:[s.jsxs("h3",{className:"text-lg font-bold text-red-800 mb-3 flex items-center",children:[s.jsx("span",{className:"mr-2",children:"⭐"}),"今回間違えた単語",s.jsx("span",{className:"ml-2",children:"⭐"})]}),s.jsx("div",{className:"space-y-2",children:n.map((f,b)=>s.jsx("div",{className:"bg-white p-3 rounded border-l-4 border-red-400",children:s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{className:"font-bold text-red-700",children:f.word}),s.jsx("span",{className:"text-gray-600",children:f.meaning})]})},b))})]}),u&&s.jsxs("div",{className:"mt-6 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:[s.jsx("h3",{className:"text-lg font-bold text-blue-800 mb-3",children:"おつかれさまです"}),s.jsxs("p",{className:"text-gray-700 text-sm mb-3",children:["今日はこのゲームを",s.jsx("span",{className:"font-bold text-blue-600",children:u.stats.todayCount}),"回チャレンジしました。 今回の得点は",s.jsx("span",{className:"font-bold text-blue-600",children:e}),"点です。"]}),u.dailyStats&&u.dailyStats.length>0&&s.jsxs("div",{className:"mt-4",children:[s.jsx("h4",{className:"text-md font-bold text-gray-800 mb-2",children:"このゲームの記録"}),s.jsx("div",{className:"bg-white rounded border overflow-hidden",children:s.jsxs("table",{className:"w-full text-sm",children:[s.jsx("thead",{className:"bg-gray-50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-3 py-2 text-left",children:"日付"}),s.jsx("th",{className:"px-3 py-2 text-center",children:"回数"}),s.jsx("th",{className:"px-3 py-2 text-center",children:"最高得点"})]})}),s.jsx("tbody",{children:u.dailyStats.slice(0,5).map((f,b)=>s.jsxs("tr",{className:b%2===0?"bg-gray-50":"bg-white",children:[s.jsx("td",{className:"px-3 py-2",children:f.played_date}),s.jsxs("td",{className:"px-3 py-2 text-center",children:[f.games_count,"回"]}),s.jsxs("td",{className:"px-3 py-2 text-center font-bold text-blue-600",children:[f.highest_score,"点"]})]},b))})]})})]})]}),s.jsx("div",{className:"mt-6",children:s.jsx("button",{onClick:t,className:h.buttons.retry,children:"もう一度遊ぶ"})})]})}const Xr=()=>{const e=p.useCallback(a=>{try{const n=new Audio(`/sound/${a}.mp3`);n.volume=.5,n.play().catch(o=>{console.log("Sound play failed:",o)})}catch(n){console.log("Sound initialization failed:",n)}},[]),r=p.useCallback(()=>e("correct"),[e]),t=p.useCallback(()=>e("wrong"),[e]);return{playCorrectSound:r,playWrongSound:t,playSound:e}};export{h as Q,Qr as a,Dr as b,Vr as c,$r as d,Mr as s,Xr as u};
