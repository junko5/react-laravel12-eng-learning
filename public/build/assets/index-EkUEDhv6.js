import{r as x,a as p,j as e,H as h}from"./app-DHacbUUS.js";import{A as b}from"./app-layout-D-O7V1Na.js";/* empty css            */import"./app-logo-icon-Dov7hsKi.js";import"./index-B27mBGXR.js";import"./index-Sk3MqX70.js";function _({dailyStats:a,totalStats:l,filters:n}){const[s,c]=x.useState(n.date_from||""),[r,i]=x.useState(n.date_to||"");x.useEffect(()=>{const t=setTimeout(()=>{p.get(route("admin.usage.index"),{date_from:s||"",date_to:r||""},{preserveState:!0,replace:!0})},500);return()=>clearTimeout(t)},[s,r]);const o=()=>{c(""),i("")},g=t=>{switch(t){case"choice":return"三択クイズ";case"input":return"入力クイズ";case"input_advanced":return"入力クイズ(上級)";default:return t}},m=t=>new Date(t).toLocaleString("ja-JP"),u=t=>t.slice(-8);return e.jsxs(b,{children:[e.jsx(h,{title:"利用履歴"}),e.jsx("div",{className:"max-w-7xl mx-auto py-6 sm:px-6 lg:px-8",children:e.jsx("div",{className:"bg-white overflow-hidden shadow-xl sm:rounded-lg",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"利用履歴"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"日別・セッション別の利用状況を確認できます"})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-800 mb-4",children:"全体統計"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg border border-blue-200",children:[e.jsx("div",{className:"text-sm text-blue-600 font-medium",children:"総セッション数"}),e.jsx("div",{className:"text-2xl font-bold text-blue-800",children:l.total_sessions})]}),e.jsxs("div",{className:"bg-green-50 p-4 rounded-lg border border-green-200",children:[e.jsx("div",{className:"text-sm text-green-600 font-medium",children:"総ゲーム数"}),e.jsx("div",{className:"text-2xl font-bold text-green-800",children:l.total_games})]}),e.jsxs("div",{className:"bg-purple-50 p-4 rounded-lg border border-purple-200",children:[e.jsx("div",{className:"text-sm text-purple-600 font-medium",children:"利用日数"}),e.jsx("div",{className:"text-2xl font-bold text-purple-800",children:l.total_days_used})]}),e.jsxs("div",{className:"bg-orange-50 p-4 rounded-lg border border-orange-200",children:[e.jsx("div",{className:"text-sm text-orange-600 font-medium",children:"平均ゲーム数/セッション"}),e.jsx("div",{className:"text-2xl font-bold text-orange-800",children:Math.round(l.average_games_per_session*10)/10})]})]})]}),e.jsxs("div",{className:"mb-6 space-y-4",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-800",children:"フィルタ"}),e.jsxs("div",{className:"flex gap-4 items-center flex-wrap",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"開始日"}),e.jsx("input",{type:"date",value:s||"",onChange:t=>c(t.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"終了日"}),e.jsx("input",{type:"date",value:r||"",onChange:t=>i(t.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),e.jsx("button",{onClick:o,className:"mt-6 px-4 py-2 text-gray-600 hover:text-gray-800 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:"クリア"})]})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"日付"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"セッションID"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"ゲーム種類"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"プレイ回数"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"最高得点"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"平均得点"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"利用時間"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:a.data.map((t,d)=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:t.date}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"text-sm font-mono text-gray-900",children:u(t.session_id)})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-blue-100 text-blue-800",children:g(t.game_type)})}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:[t.total_games,"回"]}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:[e.jsx("span",{className:"font-bold text-green-600",children:t.highest_score}),"点"]}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:[Math.round(t.average_score*10)/10,"点"]}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:[e.jsx("div",{children:m(t.first_played)}),t.first_played!==t.last_played&&e.jsxs("div",{className:"text-xs",children:["～ ",m(t.last_played)]})]})]},d))})]})}),a.last_page>1&&e.jsx("div",{className:"mt-6 flex justify-center",children:e.jsx("nav",{className:"flex space-x-2",children:a.links.map((t,d)=>e.jsx("button",{onClick:()=>t.url&&p.get(t.url),disabled:!t.url,className:`px-3 py-2 text-sm rounded ${t.active?"bg-blue-500 text-white":t.url?"bg-white text-gray-700 border border-gray-300 hover:bg-gray-50":"bg-gray-100 text-gray-400 cursor-not-allowed"}`,dangerouslySetInnerHTML:{__html:t.label}},d))})}),a.data.length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx("p",{className:"text-gray-500 text-lg",children:s||r?"指定された期間の利用履歴はありません。":"まだ利用履歴がありません。"}),(s||r)&&e.jsx("button",{onClick:o,className:"mt-4 inline-block bg-gray-500 hover:bg-gray-600 text-white font-bold py-2 px-4 rounded transition-colors",children:"フィルタをクリア"})]})]})})})]})}export{_ as default};
